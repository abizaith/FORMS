<htmlform>
    <macros>
        @PATIENT_IDENTIFIER@=IMB ID
        @LABORATORY_EXAMINATIONS_CONSTRUCT@=RWANDA: 1337
        @DATE_OF_LABORATORY_TEST@=RWANDA: 3267
        @HEMOGLOBIN@=RWANDA: 21
        @HEMATOCRIT@=RWANDA: 1015
        @WHITE_BLOOD_CELLS@=RWANDA: 678
        @GRANULOCYTE@=RWANDA: 3059
        @ABSOLUTE_LYMPHOCYTE_COUNT@=RWANDA: 952
        @PLATELETS@=RWANDA: 729
        @SGOT@=RWANDA: 653
        @SGPT@=RWANDA: 654
        @SERUM_CREATININE@=RWANDA: 790
        @CREATININE_CLEARANCE@=RWANDA: 1625
        @SERUM_GLUCOSE@=RWANDA: 887
        @CD4_PERCENTAGE@=RWANDA: 730
        @CD4_COUNT@=RWANDA: 5497
        @HIV_VIRAL_LOAD@=RWANDA: 856
        @OTHER_LAB_TEST_CONSTRUCT@=RWANDA: 2214
        @OTHER_LAB_TEST_NAME@=RWANDA: 2215
        @OTHER_LAB_TEST_RESULT@=RWANDA: 2216
        @DATE_OF_LABORATORY_TEST@=RWANDA: 3267
        @TESTS_ORDERED@=RWANDA: 1271
        @NON_REACTIVE@=RWANDA: 1229
        @REACTIVE@=RWANDA: 1228
        @NOT_DONE@=RWANDA: 1118
        @OTHER_NON_CODED@=RWANDA: 5622
        @ELECTRONIC_RECORD_MATCHES_PAPER_FORM@=RWANDA:Electronic record matches paper form

    </macros>


    <link type="text/css" rel="stylesheet" href="/openmrs/moduleResources/rwandahivflowsheet/hiv_flowsheet_new_row.css" />

    <table border="2" cellspacing="0" cellpadding="6" width="100%">
        <tr>
            <td>
                <b>
                    $@PATIENT_IDENTIFIER@: <lookup class="value" expression="patientIdentifiers.get(&quot;$@PATIENT_IDENTIFIER@&quot;)" />
                </b>
            </td>
            <td>
                Date: <encounterDate default="today" disallowMultipleEncountersOnDate="warn"/>
            </td>
            <td>
                Clinique / Clinic: <encounterLocation />
            </td>
            <td>
                Nom / Signature: <encounterProvider role="HIV Patient Provider"/>
            </td>
        </tr>
    </table>

    <section headerLabel="SUIVI BIOLOGIQUE / LABS">
        <table border="1" width="100%">
            <obsgroup groupingConceptId="$@LABORATORY_EXAMINATIONS_CONSTRUCT@">
                <tr>
                    <th width="20%">Hb</th>
                    <td><obs conceptId="$@HEMOGLOBIN@" /></td>
                </tr>
                <tr>
                    <th width="20%">Ht</th>
                    <td><obs conceptId="$@HEMATOCRIT@" /></td>
                </tr>
                <tr>
                    <th width="20%">GB</th>
                    <td><obs conceptId="$@WHITE_BLOOD_CELLS@" /></td>
                </tr>
                <tr>
                    <th width="20%">Neutro</th>
                    <td><obs conceptId="$@GRANULOCYTE@" /></td>
                </tr>
                <tr>
                    <th width="20%">Lympho</th>
                    <td><obs conceptId="$@ABSOLUTE_LYMPHOCYTE_COUNT@" /></td>
                </tr>
                <tr>
                    <th width="20%">Plt</th>
                    <td><obs conceptId="$@PLATELETS@" /></td>
                </tr>
                <tr>
                    <th width="20%">SGOT</th>
                    <td><obs conceptId="$@SGOT@" /></td>
                </tr>
                <tr>
                    <th width="20%">SGPT</th>
                    <td><obs conceptId="$@SGPT@" /></td>
                </tr>
                <tr>
                    <th width="20%">Creat.</th>
                    <td><obs conceptId="$@SERUM_CREATININE@" /></td>
                </tr>
                <tr>
                    <th width="20%">CrCL</th>
                    <td><obs conceptId="$@CREATININE_CLEARANCE@" /></td>
                </tr>
                <tr>
                    <th width="20%">Glucose</th>
                    <td><obs conceptId="$@SERUM_GLUCOSE@" /></td>
                </tr>

                <obsgroup groupingConceptId="$@OTHER_LAB_TEST_CONSTRUCT@">
                    <tr>
                        <th width="20%">1. Autre examen</th>
                        <td>
                            <obs conceptId="$@TESTS_ORDERED@" id="testOrdered1" />
                            <obs conceptId="$@OTHER_LAB_TEST_NAME@" labelText="autre:" size="20"  id="testOrderedName1" />
                            <obs conceptId="$@OTHER_LAB_TEST_RESULT@" labelText="Resultats: " size="10"  id="testOrderedResult1" />
                        </td>
                    </tr>
                </obsgroup>
                <obsgroup groupingConceptId="$@OTHER_LAB_TEST_CONSTRUCT@">
                    <tr>
                        <th width="20%">2. Autre examen</th>
                        <td>
                            <obs conceptId="$@TESTS_ORDERED@" id="testOrdered2" />
                            <obs conceptId="$@OTHER_LAB_TEST_NAME@" labelText="autre:" size="20"  id="testOrderedName2" />
                            <obs conceptId="$@OTHER_LAB_TEST_RESULT@" labelText="Resultats: " size="10"  id="testOrderedResult2" />
                        </td>
                    </tr>
                </obsgroup>
                <obsgroup groupingConceptId="$@OTHER_LAB_TEST_CONSTRUCT@">
                    <tr>
                        <th width="20%">3. Autre examen</th>
                        <td>
                            <obs conceptId="$@TESTS_ORDERED@" id="testOrdered3" />
                            <obs conceptId="$@OTHER_LAB_TEST_NAME@" labelText="autre:" size="20"  id="testOrderedName3"/>
                            <obs conceptId="$@OTHER_LAB_TEST_RESULT@" labelText="Resultats: " size="10"  id="testOrderedResult3" />
                        </td>
                    </tr>
                </obsgroup>

                <tr>
                    <th width="20%">CD4</th>
                    <td><obs conceptId="$@CD4_COUNT@" /></td>
                </tr>
                <tr>
                    <th width="20%">CD4%</th>
                    <td><obs conceptId="$@CD4_PERCENTAGE@" /></td>
                </tr>
                <tr>
                    <th width="20%">Charge Virale</th>
                    <td><obs conceptId="$@HIV_VIRAL_LOAD@" /></td>
                </tr>
            </obsgroup>
        </table>
    </section>
    <br/>
    <table>
        <tr>
            <th>Was all the data just entered present on the flowsheet (not only found on RDV)?</th>
            <td>
                <obs conceptId="$@ELECTRONIC_RECORD_MATCHES_PAPER_FORM@" style="radio"/>
            </td>
        </tr>
    </table>

    <br />
    <center><submit /></center>
    <encounterVoided/>
    <br />

    <script type="text/javascript">
$j(document).ready(function() {
	getField('testOrderedName1.value')[0].disabled = true;

	getField('testOrdered1.value').change(function() {
		if(getValue('testOrdered1.value') == $@OTHER_NON_CODED@) {
			getField('testOrderedName1.value')[0].disabled = false;
		} else {
			getField('testOrderedName1.value')[0].disabled = true;
		}
    });

	getField('testOrderedName2.value')[0].disabled = true;

	getField('testOrdered2.value').change(function() {
		if(getValue('testOrdered2.value') == $@OTHER_NON_CODED@) {
			getField('testOrderedName2.value')[0].disabled = false;
		} else {
			getField('testOrderedName2.value')[0].disabled = true;
		}
    });

	getField('testOrderedName3.value')[0].disabled = true;

	getField('testOrdered3.value').change(function() {
		if(getValue('testOrdered3.value') == $@OTHER_NON_CODED@) {
			getField('testOrderedName3.value')[0].disabled = false;
		} else {
			getField('testOrderedName3.value')[0].disabled = true;
		}
    });

});
</script>


</htmlform>